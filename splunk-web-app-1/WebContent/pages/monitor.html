<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>VZ Log analytics</title>

        <!-- Bootstrap Core CSS -->
        <link href="../bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

        <!-- Timeline CSS -->
        <link href="../css/timeline.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

        <!-- Morris Charts CSS -->
        <link href="../bower_components/morrisjs/morris.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="../bower_components/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>
        <div id="wrapper">
            <!-- Navigation -->
            <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0" id="top-nav-bar"></nav>
            <div id="page-wrapper">
                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">Monitor</h1>
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /.row -->
                <!-- /.row -->
                <div class="row">
                    <div class="col-lg-6 col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading ">
                                Index 1 chart
                                <div class="pull-right hide">
                                    <select name="ddl-interval">
                                        <option>3</option>
                                        <option>5</option>
                                        <option>10</option>
                                        <option>30</option>
                                        <option>60</option>
                                    </select>
                                    <span>sec interval</span>
                                </div>
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                                <div class="flot-chart">
                                    <div class="flot-chart-content" id="flot-line-chart-moving-1"></div>
                                </div>
                            </div>
                            <!-- /.panel-body -->
                        </div>
                        <!-- /.panel -->
                    </div>
                    
                    <div class="col-lg-6 col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading ">
                                Index 2 chart
                                <div class="pull-right hide">
                                    <select name="ddl-interval">
                                        <option>3</option>
                                        <option>5</option>
                                        <option>10</option>
                                        <option>30</option>
                                        <option>60</option>
                                    </select>
                                    <span>sec interval</span>
                                </div>
                            </div>
                            <!-- /.panel-heading -->
                            <div class="panel-body">
                                <div class="flot-chart">
                                    <div class="flot-chart-content" id="flot-line-chart-moving-2"></div>
                                </div>
                            </div>
                            <!-- /.panel-body -->
                        </div>
                        <!-- /.panel -->
                    </div>
                </div>
                <!-- /.row -->
            </div>
            <!-- /#page-wrapper -->

        </div>
        <!-- /#wrapper -->

        <!-- jQuery -->
        <script src="../bower_components/jquery/dist/jquery.min.js"></script>

        <!-- Bootstrap Core JavaScript -->
        <script src="../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

        <!-- Metis Menu Plugin JavaScript -->
        <script src="../bower_components/metisMenu/dist/metisMenu.min.js"></script>

        <!-- Flot Charts JavaScript -->
        <script src="../bower_components/flot/excanvas.min.js"></script>
        <script src="../bower_components/flot/jquery.flot.js"></script>
        <script src="../bower_components/flot/jquery.flot.pie.js"></script>
        <script src="../bower_components/flot/jquery.flot.resize.js"></script>
        <script src="../bower_components/flot/jquery.flot.time.js"></script>
        <script src="../bower_components/flot.tooltip/js/jquery.flot.tooltip.min.js"></script>

        <!-- Custom Theme JavaScript 
        <script src="../dist/js/sb-admin-2.js"></script>
        -->
        <script type="text/javascript">
            $(function(){
                $("#top-nav-bar").load('top-nav.html');
            });
        </script>
        <script type="text/javascript">

            var interval = [1, 5];

            $(function(){

                var container = $("#flot-line-chart-moving-1");

                // Determine how many data points to keep based on the placeholder's initial size;
                // this gives us a nice high-res plot while avoiding more than one point per pixel.

                var maximum = container.outerWidth() / 2 || 300;

                //

                var data = [];

                function getRandomData(){

                    if (data.length) {
                        data = data.slice(1);
                    }

                    while (data.length < maximum) {
                        var previous = data.length ? data[data.length - 1] : 50;
                        var y = previous + Math.random() * 10 - 5;
                        data.push(y < 0 ? 0 : y > 100 ? 100 : y);
                    }

                    // zip the generated y values with the x values

                    var res = [];
                    for (var i = 0; i < data.length; ++i) {
                        res.push([i, data[i]])
                    }

                    return res;
                }

                //

                var series = [{
                        data: getRandomData(),
                        lines: {
                            fill: true
                        }
                    }];

                //
                
                var plot = [];

                plot[0] = $.plot($("#flot-line-chart-moving-1"), series, {
                    grid: {
                        borderWidth: 1,
                        minBorderMargin: 20,
                        labelMargin: 10,
                        backgroundColor: {
                            colors: ["#fff", "#e4f4f4"]
                        },
                        margin: {
                            top: 8,
                            bottom: 20,
                            left: 20
                        },
                        markings: function(axes){
                            var markings = [];
                            var xaxis = axes.xaxis;
                            for (var x = Math.floor(xaxis.min); x < xaxis.max; x += xaxis.tickSize * 2) {
                                markings.push({
                                    xaxis: {
                                        from: x,
                                        to: x + xaxis.tickSize
                                    },
                                    color: "rgba(232, 232, 255, 0.2)"
                                });
                            }
                            return markings;
                        }
                    },
                    xaxis: {
                        tickFormatter: function(){
                            return "";
                        }
                    },
                    yaxis: {
                        min: 0,
                        max: 110
                    },
                    legend: {
                        show: true
                    }
                });

                // Update the random dataset at 25FPS for a smoothly-animating chart
                setInterval(function(){
                    console.log("First one triggered");
                    series[0].data = getRandomData();
                    plot[0].setData(series);
                    plot[0].draw();
                }, interval[0] * 1000);
                
                
                //Second chat                
                var series = [{
                        data: getRandomData(),
                        lines: {
                            fill: true
                        }
                    }];
                
                plot[1] = $.plot($("#flot-line-chart-moving-2"), series, {
                    grid: {
                        borderWidth: 1,
                        minBorderMargin: 20,
                        labelMargin: 10,
                        backgroundColor: {
                            colors: ["#fff", "#e4f4f4"]
                        },
                        margin: {
                            top: 8,
                            bottom: 20,
                            left: 20
                        },
                        markings: function(axes){
                            var markings = [];
                            var xaxis = axes.xaxis;
                            for (var x = Math.floor(xaxis.min); x < xaxis.max; x += xaxis.tickSize * 2) {
                                markings.push({
                                    xaxis: {
                                        from: x,
                                        to: x + xaxis.tickSize
                                    },
                                    color: "rgba(232, 232, 255, 0.2)"
                                });
                            }
                            return markings;
                        }
                    },
                    xaxis: {
                        tickFormatter: function(){
                            return "";
                        }
                    },
                    yaxis: {
                        min: 0,
                        max: 110
                    },
                    legend: {
                        show: true
                    }
                });

                // Update the random dataset at 25FPS for a smoothly-animating chart
                setInterval(function(){
                    console.log("Second one triggered");
                    series[0].data = getRandomData();
                    plot[1].setData(series);
                    plot[1].draw();
                }, interval[1] * 1000);
            });

            $("#log-type1 select[name='ddl-interval']").on('change', function(){
                var key = $(this).closest("div.scr-log-key").attr('data-log-key');
                console.log(interval[key] + " => " + $(this).val());
                interval[key] = $(this).val();
            });

        </script>

    </body>

</html>
